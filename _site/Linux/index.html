
<h1 id="linux简介">Linux简介</h1>

<p>Linux 英文解释为 Linux is not Unix。</p>

<p>Linux 是一套免费使用和自由传播的类 Unix 操作系统，是一个基于 POSIX 和 UNIX 的多用户、多任务、支持多线程和多 CPU 的操作系统。</p>

<p>Linux 能运行主要的 UNIX 工具软件、应用程序和网络协议。它支持 32 位和 64 位硬件。Linux 继承了 Unix 以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。</p>

<p><strong>Linux 的发行版说简单点就是将 Linux 内核与应用软件做一个打包。</strong></p>

<p><img src="/home/yujing/.config/Typora/typora-user-images/image-20191106212256101.png" alt="image-20191106212256101" /></p>

<p><strong>Linux 应用领域</strong></p>

<p>今天各种场合都有使用各种 Linux 发行版，从嵌入式设备到超级计算机，并且在服务器领域确定了地位，通常服务器使用 LAMP（Linux + Apache + MySQL + PHP）或 LNMP（Linux + Nginx+ MySQL + PHP）组合。</p>

<p>目前 Linux 不仅在家庭与企业中使用，并且在政府中也很受欢迎。</p>

<ul>
  <li>巴西联邦政府由于支持 Linux 而世界闻名。</li>
  <li>有新闻报道俄罗斯军队自己制造的 Linux 发布版的，做为 G.H.ost 项目已经取得成果。</li>
  <li>印度的 Kerala 联邦计划在向全联邦的高中推广使用 Linux。</li>
  <li>中华人民共和国为取得技术独立，在龙芯处理器中排他性地使用 Linux。</li>
  <li>在西班牙的一些地区开发了自己的 Linux 发布版，并且在政府与教育领域广泛使用，如 Extremadura 地区的 gnuLinEx 和 Andalusia 地区的 Guadalinex。</li>
  <li>葡萄牙同样使用自己的 Linux 发布版 Caixa Mágica，用于 Magalh?es 笔记本电脑和 e-escola 政府软件。</li>
  <li>法国和德国同样开始逐步采用 Linux。</li>
</ul>

<p><strong>Linux vs Windows</strong></p>

<p>目前国内 Linux 更多的是应用于服务器上，而桌面操作系统更多使用的是 Windows。主要区别如下</p>

<table>
  <thead>
    <tr>
      <th>比较</th>
      <th>Windows</th>
      <th>Linux</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>界面</td>
      <td>界面统一，外壳程序固定所有 Windows 程序菜单几乎一致，快捷键也几乎相同</td>
      <td>图形界面风格依发布版不同而不同，可能互不兼容。GNU/Linux 的终端机是从 UNIX 传承下来，基本命令和操作方法也几乎一致。</td>
    </tr>
    <tr>
      <td>驱动程序</td>
      <td>驱动程序丰富，版本更新频繁。默认安装程序里面一般包含有该版本发布时流行的硬件驱动程序，之后所出的新硬件驱动依赖于硬件厂商提供。对于一些老硬件，如果没有了原配的驱动有时很难支持。另外，有时硬件厂商未提供所需版本的 Windows 下的驱动，也会比较头痛。</td>
      <td>由志愿者开发，由 Linux  核心开发小组发布，很多硬件厂商基于版权考虑并未提供驱动程序，尽管多数无需手动安装，但是涉及安装则相对复杂，使得新用户面对驱动程序问题（是否存在和安装方法）会一筹莫展。但是在开源开发模式下，许多老硬件尽管在Windows下很难支持的也容易找到驱动。HP、Intel、AMD 等硬件厂商逐步不同程度支持开源驱动，问题正在得到缓解。</td>
    </tr>
    <tr>
      <td>使用</td>
      <td>使用比较简单，容易入门。图形化界面对没有计算机背景知识的用户使用十分有利。</td>
      <td>图形界面使用简单，容易入门。文字界面，需要学习才能掌握。</td>
    </tr>
    <tr>
      <td>学习</td>
      <td>系统构造复杂、变化频繁，且知识、技能淘汰快，深入学习困难。</td>
      <td>系统构造简单、稳定，且知识、技能传承性好，深入学习相对容易。</td>
    </tr>
    <tr>
      <td>软件</td>
      <td>每一种特定功能可能都需要商业软件的支持，需要购买相应的授权。</td>
      <td>大部分软件都可以自由获取，同样功能的软件选择较少。</td>
    </tr>
  </tbody>
</table>

<h1 id="安装">安装</h1>

<p>本文以 ubuntu 为例</p>

<h2 id="安装准备">安装准备</h2>

<p>1.Ubuntu18.04镜像
 你可以选择<a href="https://links.jianshu.com/go?to=http%3A%2F%2Freleases.ubuntu.com%2Fbionic%2Fubuntu-18.04.1-desktop-amd64.iso">镜像文件下载</a>或<a href="https://links.jianshu.com/go?to=http%3A%2F%2Freleases.ubuntu.com%2Fbionic%2Fubuntu-18.04.1-desktop-amd64.iso.torrent">镜像文件种子下载</a>，但我推荐使用种子文件，种子文件搭配迅雷下载速度十分快。
 2.一个8G或以上U盘
 推荐使用3.0接口的U盘，毕竟速度快，安装时间也要大大缩短</p>

<h2 id="制作启动u盘">制作启动U盘</h2>

<p>不同于以前的方法，制作启动U盘的方法十分简单，完全不用下载任何工具。
 1.清空U盘
 插上U盘后，最好是能将U盘格式化一下，但是我一直是直接将U盘里的文件全部删除；
 2.将文件拷进U盘
 如果按照以前的方法，需要下载一个虚拟光驱之类的，但是，现在，在win10上，只需要双击刚
刚下载的ISO文件，然后选中打开的窗口中所有文件，将其复制到U盘。</p>

<table>
  <tbody>
    <tr>
      <td>![img](https://upload-images.jianshu.io/upload_images/11037888-847f6cf0d5f224ff.gif?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/1200)</td>
    </tr>
  </tbody>
</table>

<h2 id="为ubuntu腾出空间">为Ubuntu腾出空间</h2>

<p>在桌面右击<code class="highlighter-rouge">计算机</code>,选择<code class="highlighter-rouge">管理</code>，点击左侧<code class="highlighter-rouge">磁盘管理</code>，在你的机械硬盘或固态硬盘上分出一个大于40G的空间（如果你只是体验的话，只需要20G不到就好了）。具体为右击你要分区的磁盘，选择<code class="highlighter-rouge">压缩卷</code>，填入你要压缩的空间大小。</p>

<table>
  <tbody>
    <tr>
      <td>![img](https:////upload-images.jianshu.io/upload_images/11037888-fbc4c98caa911978.gif?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/1200)</td>
    </tr>
  </tbody>
</table>

<h2 id="修改启动项以联想品牌为例">修改启动项(以联想品牌为例)</h2>

<p>因为我的电脑是联想，所以在这我以联想拯救者为例，讲讲怎么修改BIOS。
 重启电脑，一直狂戳<code class="highlighter-rouge">F2</code>(有的电脑是F1，有的电脑是<code class="highlighter-rouge">Esc</code>,请自行查询)，直到进入BIOS，点击方向箭头→ 移动到Security，再按↓移动到Secure Boot上，点击<code class="highlighter-rouge">回车键</code>，选择<code class="highlighter-rouge">Disable</code>；</p>

<table>
  <tbody>
    <tr>
      <td>![img](https:////upload-images.jianshu.io/upload_images/11037888-3018f929a665a835.jpg?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/1200)</td>
    </tr>
  </tbody>
</table>

<p>Ubuntu18.04安装</p>

<p>当然，最好去Boot里面看看USB Boot是否为；</p>

<table>
  <tbody>
    <tr>
      <td>![img](https://upload-images.jianshu.io/upload_images/11037888-3884606d11a079b1.jpg?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/1200)</td>
    </tr>
  </tbody>
</table>

<p>关于无法读出硬盘，需要将SATA Controller Mode选为ACHI模式。
<code class="highlighter-rouge">F10</code></p>

<h2 id="安装ubuntu到电脑">安装Ubuntu到电脑</h2>

<p>退出后，你又会进入Windows，那么，请再重启一遍，记住，千万不要把你的U盘拔下来！！！不然你还装怎么！
 1.重启进去你的电脑品牌界面时，一直狂戳<code class="highlighter-rouge">F12</code>,在出现的界面选择你的U盘，如我的这里有个明显的”USB 3.0”，请自行甄别。</p>

<p>2.等待一会便进入启动选项，不用动，就选择<code class="highlighter-rouge">Try ubuntu whthout install</code>
<code class="highlighter-rouge">Install Ubuntu 18.04LTS</code></p>

<table>
  <tbody>
    <tr>
      <td>![img](https:////upload-images.jianshu.io/upload_images/11037888-fb59726dd32d7913.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/1200)</td>
    </tr>
  </tbody>
</table>

<p>Ubuntu18.04安装</p>

<p>4.首先选择语言为中文(简体)，点继续；</p>

<table>
  <tbody>
    <tr>
      <td>![img](https://upload-images.jianshu.io/upload_images/11037888-5409a708aafec5c1.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/976)</td>
    </tr>
  </tbody>
</table>

<p>Ubuntu18.04安装</p>

<p>5.键盘布局已经自动选择好了，你可以选择不改变；</p>

<table>
  <tbody>
    <tr>
      <td>![img](https://upload-images.jianshu.io/upload_images/11037888-8b18a51afbc2cb64.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/874)</td>
    </tr>
  </tbody>
</table>

<p>Ubuntu18.04安装</p>

<p>6.接着无线选项中，选择；</p>

<table>
  <tbody>
    <tr>
      <td>![img](https://upload-images.jianshu.io/upload_images/11037888-145d0377872e561f.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/878)</td>
    </tr>
  </tbody>
</table>

<p>7.在<code class="highlighter-rouge">更新和其他软件</code><code class="highlighter-rouge">最小安装</code></p>

<table>
  <tbody>
    <tr>
      <td>![img](https://upload-images.jianshu.io/upload_images/11037888-c62b428b60bfcc29.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/877)</td>
    </tr>
  </tbody>
</table>

<p>Ubuntu18.04安装</p>

<p>8.在安装类型中，选择；</p>

<table>
  <tbody>
    <tr>
      <td>![img](https://upload-images.jianshu.io/upload_images/11037888-1896e2bb631233c5.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/879)</td>
    </tr>
  </tbody>
</table>

<p>9.在出现的页面中找到并点击你之前分的空闲盘，我是根据大小寻找的，我之前分了60G，所以我找到大小60G左右的盘，双击该分区或者选中该分区后，点击左下角的<code class="highlighter-rouge">+</code></p>

<table>
  <tbody>
    <tr>
      <td>![img](https://upload-images.jianshu.io/upload_images/11037888-42d8757cc4cbe9ce.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/861)</td>
    </tr>
  </tbody>
</table>

<p>10.网上的分区方案有许多，我的方案只有三个分区，分区如下图所示</p>

<p>a.EFI分区，主空间，空间起始位置，大小512M；</p>

<table>
  <tbody>
    <tr>
      <td>![img](https://upload-images.jianshu.io/upload_images/11037888-a6e4390c1230aad8.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/860)</td>
    </tr>
  </tbody>
</table>

<p>b.交换分区，逻辑分区，空间起始位置，大小8G，因为我的电脑内存为8G，具体大小根据你的电脑内存大小来设置；</p>

<table>
  <tbody>
    <tr>
      <td>![img](https:////upload-images.jianshu.io/upload_images/11037888-b6336bb4e44baacc.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/859)</td>
    </tr>
  </tbody>
</table>

<p>Ubuntu18.04安装</p>

<p>c./（根目录），主分区，空间起始位置，大小为剩下所有空间。</p>

<table>
  <tbody>
    <tr>
      <td>![img](https:////upload-images.jianshu.io/upload_images/11037888-56a6d80555336850.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/863)</td>
    </tr>
  </tbody>
</table>

<p>Ubuntu18.04安装</p>

<p>11.在安装启动引导器中选择你刚刚分的EFI分区，然后点击现在安装，弹出选项点击确认就好；</p>

<table>
  <tbody>
    <tr>
      <td>![img](https:////upload-images.jianshu.io/upload_images/11037888-2799260aca558a7a.png?imageMogr2/auto-orient/strip</td>
      <td>imageView2/2/w/863)</td>
    </tr>
  </tbody>
</table>

<p>Ubuntu18.04安装</p>

<p>12，接下来，时区选择以自动选择为东八区了，最后就是输入电脑的用户名、电脑名称和密码了，等待安装完成后，由于一些原因无法直接关机，只能长按电源键，之后开启电脑便会进入Ubuntu的启动引导，输入密码，你便进入了一个全新的世界！</p>

<h2 id="补充部分机型安装问题">补充部分机型安装问题</h2>

<p>详见我的另外一篇文章<a href="https://www.jianshu.com/p/b0dd3eecb2a1">Ubuntu18.04部分问题解决</a></p>

<h3 id="联想小新ideapad-710s-13kb来自简友夜明宿清-反馈问题">联想小新ideapad 710s-13kb（来自简友@夜明宿清 反馈问题）</h3>

<p>问题：安装时无法读取硬盘，而且无法正常安装
 解决思路：请参考<a href="https://links.jianshu.com/go?to=%5Bhttps%3A%2F%2Fchubuntu.com%2Fquestions%2F66133%2Finstalling-ubuntu-on-lenovo-ideapad-710s-13ikb.html%5D(https%3A%2F%2Fchubuntu.com%2Fquestions%2F66133%2Finstalling-ubuntu-on-lenovo-ideapad-710s-13ikb.html)">在联想Ideapad 710S-13IKB上安装Ubuntu</a>和<a href="https://links.jianshu.com/go?to=%5Bhttps%3A%2F%2Fblog.csdn.net%2Fweixin_38180645%2Farticle%2Fdetails%2F82854453%5D(https%3A%2F%2Fblog.csdn.net%2Fweixin_38180645%2Farticle%2Fdetails%2F82854453)">Win10+Ubuntu18.04 双系统安装遇到的问题记录</a>这两篇文章，需要更新一下BIOS。</p>

<h2 id="linux-系统启动过程">Linux 系统启动过程</h2>

<blockquote>
  <p>启动过程分为5个阶段:</p>

  <ul>
    <li>内核的引导</li>
    <li>运行 init</li>
    <li>系统初始化</li>
    <li>建立中断</li>
    <li>用户登录系统</li>
  </ul>
</blockquote>

<p><strong>（1）内核引导</strong></p>

<p>当计算机打开电源后,首先会 BIOS 开机自检,按照 BIOS 设置的启动设备(通常是硬盘)来启动。操作系统接管硬件以后，首先读入 /boot 目录下的内核文件。</p>

<p><strong>（2）运行init</strong></p>

<p>init进程是系统所有进程的起点，你可以把它比拟成系统所有进程的老祖宗，没有这个进程，系统中任何进程都不会启动。init 程序首先是需要读取配置文件 /etc/inittab。</p>

<blockquote>
  <p>init程序的类型：</p>

  <ul>
    <li><strong>SysV:</strong> init, CentOS 5之前, 配置文件： /etc/inittab。</li>
    <li><strong>Upstart:</strong> init,CentOS 6, 配置文件： /etc/inittab, /etc/init/*.conf。</li>
    <li><strong>Systemd：</strong> systemd, CentOS 7,配置文件： /usr/lib/systemd/system、 /etc/systemd/system。</li>
  </ul>
</blockquote>

<p><img src="/home/yujing/.config/Typora/typora-user-images/image-20191106221507179.png" alt="image-20191106221507179" /></p>

<p><strong>运行级别</strong></p>

<p>许多程序需要开机启动。他们在Windows叫做“服务(service)”，在Linux叫做“守护进程（daemon）”。</p>

<p>init进程的一大任务就是运行这些开机启动的程序。但是，不同的场合需要启动不同的程序，比如用作服务器时，需要启动Apache，用作桌面就不需要。Linux允许为不同的场合，分配不同的开机启动程序，这就叫做“运行级别（runlevel）”。也就是说，启动时根据“运行级别”，确定要运行哪些进程。</p>

<p><img src="/home/yujing/.config/Typora/typora-user-images/image-20191106222014059.png" alt="image-20191106222014059" /></p>

<p>Linux系统有7个运行级别：</p>

<ul>
  <li>
    <p>运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动。</p>
  </li>
  <li>
    <p>运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登录。</p>
  </li>
  <li>
    <p>运行级别2：多用户状态（没有NFS</p>

  </li>
  <li>运行级别4：系统未使用，保留。</li>
  <li>运行级别5：X11控制台，登陆后进入图形GUI模式。</li>
  <li>运行级别6：系统正常关闭并重启，默认运行级别不能为6，否则不能正常启动。</li>
</ul>

<p><strong>（3）系统初始化</strong></p>

<p>在init的配置文件中有这么一行：si::sysinit:/etc/rc.sysinit  它调用执行了/etc/rc.d/rc.sysinit，而rc.sysinit是一个bash shell的脚本，它主要是完成一些系统初始化的工作，rc.sysinit 是每一个运行级别都要首先运行的重要脚本。
它主要完成的工作有：激活交换分区，检查磁盘，加载硬件模块以及其他一些需要优先执行任务。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>l5:5:wait:/etc/rc.d/rc 5
</code></pre></div></div>

<p>这一行表示以5为参数运行/etc/rc.d/rc，/etc/rc.d/rc是一个Shell脚本，它接受5作为参数，去执行/etc/rc.d/rc5.d/目录下的所有的rc启动脚本，/etc/rc.d/rc5.d/目录中的这些启动脚本实际上都是一些连接文件，而不是真正的rc启动脚本，真正的rc启动脚本实际上都是放在/etc/rc.d/init.d/目录下。</p>

<p>而这些rc启动脚本有着类似的用法，它们一般能接受start、stop、restart、status等参数。</p>

<p>/etc/rc.d/rc5.d/中的rc启动脚本通常是K或S开头的连接文件，对于以 S 开头的启动脚本，将以start参数来运行。</p>

<p>而如果发现存在相应的脚本也存在K打头的连接，而且已经处于运行态了(以/var/lock/subsys/下的文件作为标志)，则将首先以stop为参数停止这些已经启动了的守护进程，然后再重新运行。</p>

<p>这样做是为了保证是当init改变运行级别时，所有相关的守护进程都将重启。</p>

<p>至于在每个运行级中将运行哪些守护进程，用户可以通过chkconfig或setup中的”System Services”来自行设定。</p>

<p><img src="/home/yujing/.config/Typora/typora-user-images/image-20191106224352748.png" alt="image-20191106224352748" /></p>

<p><strong>（4）建立终端</strong></p>

<p>rc执行完毕后，返回init。这时基本系统环境已经设置好了，各种守护进程也已经启动了。</p>

<p>init接下来会打开6个终端，以便用户登录系统。在inittab中的以下6行就是定义了6个终端：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1:2345:respawn:/sbin/mingetty tty1
2:2345:respawn:/sbin/mingetty tty2
3:2345:respawn:/sbin/mingetty tty3
4:2345:respawn:/sbin/mingetty tty4
5:2345:respawn:/sbin/mingetty tty5
6:2345:respawn:/sbin/mingetty tty6
</code></pre></div></div>

<p>从上面可以看出在2、3、4、5的运行级别中都将以respawn方式运行mingetty程序，mingetty程序能打开终端、设置模式。</p>

<p>同时它会显示一个文本登录界面，这个界面就是我们经常看到的登录界面，在这个登录界面中会提示用户输入用户名，而用户输入的用户将作为参数传给login程序来验证用户的身份。</p>

<h1 id="linux-vivim">Linux vi/vim</h1>

<p>vim 具有程序编辑的能力，可以主动的以字体颜色辨别语法的正确性，方便程序设计。</p>

<p><strong>vim 与 linux终端的关系</strong></p>

<p>vim是Linux下的一个编辑器，通过Linux终端输入 vim 可以进入vim终端。</p>

<h2 id="什么是vim">什么是vim</h2>

<p>vim 是从vi发展出来的一个文本编辑器。代码补全、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。简单来说，vi是老式的文字处理器，不过功能已经很齐全了，但是还是有可以进步的地方。</p>

<p><img src="https://www.runoob.com/wp-content/uploads/2015/10/vi-vim-cheat-sheet-sch.gif" alt="img" /></p>

<h2 id="vivim的模式">vi/vim的模式</h2>

<p>基本上vi/vim共分为三种模式，分别是命令模式，输入模式和底线命令模式。</p>

<p><strong>命令模式：</strong></p>

<p>控制屏幕光标的移动，字符、字或行的删除，移动复制某区段及进入Insert mode下，或者到 last line mode。</p>

<p>用户刚刚启动vi/vim,便进入了命令模式。此状态下敲击键盘动作被vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当做了一个命令。</p>

<p>以下是常用的几个命令：</p>

<p>i   切换到输入模式，以输入字符；</p>

<p>x   删除当前光标所在处的字符。</p>

<p>： 切换到底线命令模式，以在最底一行输入命令。</p>

<p><strong>输入模式：</strong></p>

<p>只有在Insert mode下，才可以做文字输入，按「ESC」键可回到<a href="https://www.baidu.com/s?wd=命令行&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao">命令行</a>模式。</p>

<p>在命令模式下，按下 i 就进入了输入模式。在输入模式中，可以使用以下按键：</p>

<ul>
  <li>字符按键以及shift组合，输入字符</li>
  <li>enter ，回车键，换行</li>
  <li>backspace ，退格键，删除光标前一个字符</li>
  <li>del 删除键，删除光标后一个字符</li>
  <li>方向键，在文本中移动光标</li>
  <li>home/end ,移动光标到行首、行尾</li>
  <li>page up/page down ，上下翻页</li>
  <li>insert ，切换光标为输入/替换模式，光标将变成竖线/下划线</li>
  <li>esc, 退出输入模式，切换到命令模式</li>
</ul>

<p><strong>一般模式切换到编辑模式的快捷键：</strong></p>

<table>
  <thead>
    <tr>
      <th>进入输入或取代的编辑模式</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>i, I</td>
      <td>进入输入模式(Insert mode)：  	i 为『从目前光标所在处输入』， I 为『在目前所在行的第一个非空格符处开始输入』。 	(常用)</td>
    </tr>
    <tr>
      <td>a, A</td>
      <td>进入输入模式(Insert mode)：  	a 为『从目前光标所在的下一个字符处开始输入』， A 	为『从光标所在行的最后一个字符处开始输入』。(常用)</td>
    </tr>
    <tr>
      <td>o, O</td>
      <td>进入输入模式(Insert mode)：  	这是英文字母 o 的大小写。o 为『在目前光标所在的下一行处输入新的一行』； 	O 为在目前光标所在处的上一行输入新的一行！(常用)</td>
    </tr>
    <tr>
      <td>r, R</td>
      <td>进入取代模式(Replace mode)：  	r 只会取代光标所在的那一个字符一次；R会一直取代光标所在的文字，直到按下 	ESC 为止；(常用)</td>
    </tr>
    <tr>
      <td>[Esc]</td>
      <td>退出编辑模式，回到一般模式中(常用)</td>
    </tr>
  </tbody>
</table>

<p>上面这些按键中，在 vi 画面的左下角处会出现『–INSERT–』或『–REPLACE–』的字样。 	由名称就知道该动作了吧！！特别注意的是，我们上面也提过了，你想要在档案里面输入字符时， 	一定要在左下角处看到 INSERT 或 REPLACE 才能输入喔！</p>

<p><strong>底线命令模式：</strong></p>

<p>将文件保存或退出vi，也可以设置编辑环境，如寻找字符串、列出行号……等。</p>

<p>不过一般我们在使用时把vi简化成两个模式，就是将底行模式（last line mode）也算入<a href="https://www.baidu.com/s?wd=命令行&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao">命令行</a>模式command mode）。</p>

<p>在命令模式下按下 :(英文冒号),就进入了底线命令模式。</p>

<p>底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。</p>

<p>在底线命令中，基本的命令有（已经省略了冒号）：</p>

<ul>
  <li>q  退出程序</li>
  <li>w  保存文件</li>
  <li>按 esc 键可随时退出底线命令模式</li>
</ul>

<p><strong>一般模式切换到命令模式快捷键</strong></p>

<table>
  <thead>
    <tr>
      <th>指令行的储存、离开等指令</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>:w</td>
      <td>将编辑的数据写入硬盘档案中(常用)</td>
    </tr>
    <tr>
      <td>:w!</td>
      <td>若文件属性为『只读』时，强制写入该档案。不过，到底能不能写入， 	还是跟你对该档案的档案权限有关啊！</td>
    </tr>
    <tr>
      <td>:q</td>
      <td>离开 vi (常用)</td>
    </tr>
    <tr>
      <td>:q!</td>
      <td>若曾修改过档案，又不想储存，使用 ! 为强制离开不储存档案。</td>
    </tr>
    <tr>
      <td>:wq</td>
      <td>储存后离开，若为 :wq! 则为强制储存后离开 	(常用)</td>
    </tr>
    <tr>
      <td>ZZ</td>
      <td>若档案没有更动，则不储存离开，若档案已经被更动过，则储存后离开！</td>
    </tr>
    <tr>
      <td>:w [filename]</td>
      <td>将编辑的数据储存成另一个档案（类似另存新档）</td>
    </tr>
    <tr>
      <td>:r [filename]</td>
      <td>在编辑的数据中，读入另一个档案的数据。亦即将 『filename』 	这个档案内容加到游标所在行后面</td>
    </tr>
    <tr>
      <td>:n1,n2 w [filename]</td>
      <td>将 n1 到 n2 的内容储存成 filename 这个档案。</td>
    </tr>
    <tr>
      <td>:! command</td>
      <td>暂时离开 vi 到指令行模式下执行 command 的显示结果！例如  	『:! ls /home』即可在 vi 当中察看 /home 底下以 ls 输出的档案信息！</td>
    </tr>
  </tbody>
</table>

<p>注意，那个惊叹号 (!) 在 vi 当中，具有『强制』的意思～</p>

<table>
  <thead>
    <tr>
      <th>vim 环境的变更</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>:set nu</td>
      <td>显示行号，设定之后，会在每一行的前缀显示该行的行号</td>
    </tr>
    <tr>
      <td>:set nonu</td>
      <td>与 set nu 相反，为取消行号！</td>
    </tr>
  </tbody>
</table>

<p>拓展：vim 几种模式的切换</p>

<blockquote>
  <p>vim和记事本或WORD不一样，不是一打开后就可以输入文字，此时它处于正常模式。
 vim一共有4个模式：
 正常模式 (Normal-mode)
 插入模式 (Insert-mode)
 命令模式 (Command-mode)
 可视模式 (Visual-mode)</p>
</blockquote>

<p>正常模式</p>

<p>正常模式一般用于浏览文件，也包括一些复制、粘贴、删除等操作。这时击键时，
 一般的键/键组合会被当成功能键，而不会键入对应的字符。
 在这个模式下，我们可能通过键盘在文本中跳来跳去，跳动的范围从小到大是字符、
 单词、行、句子、段落和屏幕。
 启动vim后默认位于正常模式。不论位于什么模式，按下<Esc>键(有时需要按两下）
 都会进入正常模式。</Esc></p>

<p>插入模式</p>

<p>在正常模式中按下i, I, a, A等键（后面系列文章会详细介绍），会进入插入模式。
 现在只用记住按i键会进行插入模式。插入模式中，击键时会写入相应的字符。</p>

<p>命令模式</p>

<p>在正常模式中，按下：（冒号）键，会进入命令模式。在命令模式中可以执行
 一些输入并执行一些vim或插件提供的指令，就像在shell里一样。这些指令包括
 设置环境、文件操作、调用某个功能等等。</p>

<p>可视模式</p>

<p>在正常模式按下v, V, <Ctrl>+v，可以进入可视模式。可视模式中的
 操作有点像拿鼠标进行操作，选择文本的时候有一种鼠标选择的即视感，有时候
 会很方便。</Ctrl></p>

<p>配置回到正常模式的快捷键</p>

<p>由于不论在其他什么模式下，按一次或两次<Esc>键都可以回到正常模式，我们
 可以想见，<Esc>键会经常用到。由于<Esc>键在标准qwert键盘的左上角，对
 于左手小指不灵活的朋友来说，按起来比较不方便（我就是如此），因此在上一篇
 中我们通过配置.vimrc把<Esc>映射成了按两下j键。</Esc></Esc></Esc></Esc></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>" 将ESC键映射为两次j键                                       
inoremap jj <span class="nt">&lt;Esc&gt;</span> 
</code></pre></div></div>

<p>j键正好在右手食指的基本键位上（一般上面还有个突起），用起来十分方便。
 如果只让我保留一个vim设置的话，我会选择保留它。</p>

<h2 id="vi的基本操作">vi的基本操作</h2>

<h3 id="进入vi">进入vi</h3>

<p>在Linux终端中，在系统提示符号后输入 vi及文件名称后，就进入vi全屏编辑画面，</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vi test.txt
</code></pre></div></div>

<p>注意：进入vi后，默认是命令模式，要切换到插入模式才能够输入文字。</p>

<p>vim终端</p>

<pre><code class="language-she&#39;ll">:open filename 打开指定文件
:open! filename  # 强制执行
</code></pre>

<h3 id="切换到插入模式编辑文件">切换到插入模式编辑文件</h3>

<p>在「命令行模式（command mode）」下按一下字母「i」就可以进入「插入模式（Insert mode）」，这时候你就可以开始输入文字了。</p>

<h3 id="插入模式insert切换">插入模式（insert）切换</h3>

<p>插入模式只能插入一行文字，如果想删除错误文字，可以直接删除或按 ESC 切换到命令模式再删除。</p>

<h3 id="退出vi及保存">退出vi及保存</h3>

<p>在命令模式下，按 ：进入底层命令模式  ：wq 保存并退出。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:w filename  将文章以指定的文件名保存
:wq  保存并退出vi
:q!  不存盘强制退出 
</code></pre></div></div>

<h2 id="vim-快捷键">vim 快捷键</h2>

<table>
  <thead>
    <tr>
      <th>动作</th>
      <th>快捷键</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>文件</strong></td>
      <td> </td>
    </tr>
    <tr>
      <td>新建标签页</td>
      <td>Ctrl+shift+T</td>
    </tr>
    <tr>
      <td>新建窗口</td>
      <td>Ctrl+shift+N</td>
    </tr>
    <tr>
      <td>关闭标签页</td>
      <td>Ctrl+shift+W</td>
    </tr>
    <tr>
      <td>关闭窗口</td>
      <td>Ctrl+shift+Q</td>
    </tr>
    <tr>
      <td><strong>编辑</strong></td>
      <td> </td>
    </tr>
    <tr>
      <td>复制</td>
      <td>Ctrl+shift+C</td>
    </tr>
    <tr>
      <td>粘贴</td>
      <td>ctrl +shift+V</td>
    </tr>
    <tr>
      <td>在一行字当中，x 为向后删除一个字符 (相当于 [del] 按键)， 	 X 为向前删除一个字符(相当于 [backspace] 亦即是退格键) 	(常用)</td>
      <td>x, X</td>
    </tr>
    <tr>
      <td>删除游标所在的那一整行(常用)</td>
      <td>dd</td>
    </tr>
    <tr>
      <td>n 为数字。删除光标所在的向下 n 行，例如 20dd 则是删除 20 行 	(常用)</td>
      <td>ndd</td>
    </tr>
    <tr>
      <td>复制游标所在的那一行(常用)</td>
      <td>yy</td>
    </tr>
    <tr>
      <td>n为数字。复制光标所在的向下n行</td>
      <td>nyy</td>
    </tr>
    <tr>
      <td>p 为将已复制的数据在光标下一行贴上，P 则为贴在游标上一行！</td>
      <td>p,P</td>
    </tr>
    <tr>
      <td>复原前一个动作。(常用)</td>
      <td>u</td>
    </tr>
    <tr>
      <td>重做上一个动作。(常用，重点是只执行一次)</td>
      <td>[Ctrl]+r</td>
    </tr>
    <tr>
      <td>如果你想要重复删除、重复贴上等等动作，按下小数点『.』就好了！ 	(常用)</td>
      <td>.</td>
    </tr>
    <tr>
      <td><strong>查看</strong></td>
      <td> </td>
    </tr>
    <tr>
      <td>全屏</td>
      <td>F11</td>
    </tr>
    <tr>
      <td>放大</td>
      <td>Ctrl++</td>
    </tr>
    <tr>
      <td>缩小</td>
      <td>Ctrl–</td>
    </tr>
    <tr>
      <td>正常大小</td>
      <td>Ctrl + 0</td>
    </tr>
    <tr>
      <td><strong>搜索</strong></td>
      <td> </td>
    </tr>
    <tr>
      <td>搜索</td>
      <td>Ctrl+shift+F</td>
    </tr>
    <tr>
      <td>查找下一个</td>
      <td>Ctrl+shift+G</td>
    </tr>
    <tr>
      <td>查找上一个</td>
      <td>Ctrl+shift+H</td>
    </tr>
    <tr>
      <td>清除高亮</td>
      <td>Ctrl+shift+J</td>
    </tr>
    <tr>
      <td>向光标之下寻找字符</td>
      <td>/word</td>
    </tr>
    <tr>
      <td>向光标之上寻找字符</td>
      <td>？word</td>
    </tr>
    <tr>
      <td>重复前一个寻找动作</td>
      <td>n</td>
    </tr>
    <tr>
      <td>反向寻找一个寻找动作</td>
      <td>N</td>
    </tr>
    <tr>
      <td>n1 与 n2 为数字。在第 n1 与 n2 行之间寻找 word1 这个字符串，并将该字符串取代为 	word2(常用)</td>
      <td>:n1,n2s/word1/word2/g</td>
    </tr>
    <tr>
      <td>从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 	word2 ！(常用)</td>
      <td>:1,$s/word1/word2/g 或 :%s/word1/word2/g</td>
    </tr>
    <tr>
      <td>从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 	word2 ！且在取代前显示提示字符给用户确认 (confirm) 	是否需要取代！(常用)</td>
      <td>:1,$s/word1/word2/gc 或 :%s/word1/word2/gc</td>
    </tr>
    <tr>
      <td><strong>标签页</strong></td>
      <td> </td>
    </tr>
    <tr>
      <td>切换到上一标签</td>
      <td>Ctrl+pageup</td>
    </tr>
    <tr>
      <td>切换到下一标签</td>
      <td>Ctrl+pagedown</td>
    </tr>
    <tr>
      <td>移动标签页到上一标签位置</td>
      <td>Ctrl+shift+pageup</td>
    </tr>
    <tr>
      <td>移动标签页到下一标签位置</td>
      <td>Ctrl+shift+pagedown</td>
    </tr>
    <tr>
      <td>切换到标签页</td>
      <td>Alt+N(0-9任意数字)</td>
    </tr>
  </tbody>
</table>

<h2 id="vim-中批量添加注释"><strong>vim 中批量添加注释</strong></h2>

<p><strong>方法一 ：块选择模式</strong></p>

<p>批量注释：</p>

<p>Ctrl + v 进入块选择模式，然后移动光标选中你要注释的行，再按大写的 <strong>I</strong> 进入行首插入模式输入注释符号如 <strong>//</strong> 或 <strong>#</strong>，输入完毕之后，按两下 <strong>ESC</strong>，<strong>Vim</strong> 会自动将你选中的所有行首都加上注释，保存退出完成注释。</p>

<p>取消注释：</p>

<p>Ctrl + v  进入块选择模式，选中你要删除的行首的注释符号，注意 <strong>//</strong> 要选中两个，选好之后按 <strong>d</strong> 即可删除注释，<strong>ESC</strong> 保存退出。</p>

<p><strong>方法二: 替换命令</strong></p>

<p>批量注释。</p>

<p>使用下面命令在指定的行首添加注释。</p>

<p>使用名命令格式： :起始行号,结束行号s/^/注释符/g（注意冒号）。</p>

<p>取消注释：</p>

<p>使用名命令格式：  :起始行号,结束行号s/^注释符//g（注意冒号）。</p>

<p>例子：</p>

<p>1、在 10 - 20 行添加 <strong>//</strong> 注释</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:10,20s#^#//#g
</code></pre></div></div>

<p>2、在 10 - 20 行删除 <strong>//</strong> 注释</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:10,20s#^//##g
</code></pre></div></div>

<p>3、在 10 - 20 行添加 <strong>#</strong> 注释</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:10,20s/^/#/g
</code></pre></div></div>

<p>4、在 <strong>10 - 20</strong> 行删除 # 注释</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:10,20s/^#//g
</code></pre></div></div>
